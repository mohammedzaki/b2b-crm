!function(e){var t={};function c(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.m=e,c.c=t,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},c.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="",c(c.s=1)}({1:function(e,t,c){e.exports=c("Lz4S")},Lz4S:function(e,t){window.processItemsCount=0,window.discount_value=0,window.discount_percentage=0,window.source_discount_percentage=.005,window.source_discount_value=0,window.totxal_price=0,window.taxes=0,window.priceAfterTaxes=0,window.roundDecimals=function(e,t){return t=t||0,Number(Math.round(e+"e"+t)+"e-"+t)},window.add_new_process_item=function(){var e="<tr>";e+='<td><div class="form-group"><input class="form-control" name="items['+processItemsCount+'][description]" placeholder="ادخل تفاصيل البيان" /></div></td>',e+='<td><div class="form-group"><input class="form-control quantity" name="items['+processItemsCount+'][quantity]" value="0" placeholder="ادخل الكمية" /></div></td>',e+='<td><div class="form-group"><input class="form-control unit_price" name="items['+processItemsCount+'][unit_price]" value="0" placeholder="ادخل سعر الوحدة" /></div></td>',e+='<td><div class="form-group"><input class="form-control total_price" name="items['+processItemsCount+'][total_price]" value="0" /></div></td>',e+='<td><div class="btn btn-danger btn-sm pull-left delete"><i class="fa fa-times"></i> حذف</div></td>',e+="</tr>",$("#prcoess_items").append(e),processItemsCount++},window.calculate_process_price=function(){return total_price=0,$(".total_price").each(function(){total_price=parseFloat($(this).val())+total_price,total_price=roundDecimals(total_price,decimalPointCount)}),total_price},window.calculate_percentage=function(){return discount_percentage=0,$('input[name="has_discount"]').is(":checked")&&(discount_percentage=calculate_discount()/calculate_process_price()*100,discount_percentage=roundDecimals(discount_percentage,decimalPointCount)),discount_percentage},window.calculate_discount_from_percentage=function(){return discount_value=0,$('input[name="has_discount"]').is(":checked")&&(discount_percentage=$("#discount_percentage").val(),discount_value=calculate_process_price()/100*discount_percentage,discount_value=roundDecimals(discount_value,decimalPointCount)),discount_value},window.calculate_discount=function(){return discount_value=0,$('input[name="has_discount"]').is(":checked")&&(discount_value=roundDecimals($("#discount_value").val(),decimalPointCount)),discount_value},window.calculate_taxes=function(){return taxes=0,$('input[name="require_invoice"]').is(":checked")&&(taxes=calculate_process_price()*parseFloat(TaxesRate),taxes=roundDecimals(taxes,decimalPointCount)),taxes},window.calculate_process_price_taxes=function(){return priceAfterTaxes=0,priceAfterTaxes=roundDecimals(calculate_process_price()+calculate_taxes()-(calculate_discount()+calculate_source_discount()),decimalPointCount),priceAfterTaxes},window.calculate_source_discount=function(){return source_discount_value=0,$('input[name="has_source_discount"]').is(":checked")&&(source_discount_value=roundDecimals($("#source_discount_value").val(),decimalPointCount)),source_discount_value},window.calculate_source_percentage=function(){return source_discount_percentage=0,$('input[name="has_source_discount"]').is(":checked")&&(source_discount_percentage=calculate_source_discount()/calculate_process_price()*100,source_discount_percentage=roundDecimals(source_discount_percentage,decimalPointCount)),source_discount_percentage},window.calculate_source_discount_from_percentage=function(){return source_discount_value=0,$('input[name="has_source_discount"]').is(":checked")&&(source_discount_percentage=$("#source_discount_percentage").val(),source_discount_value=calculate_process_price()/100*source_discount_percentage,source_discount_value=roundDecimals(source_discount_value,decimalPointCount)),source_discount_value},window.update_prices=function(){var e=$(".process_price"),t=$(".discount_price"),c=$(".taxes_price"),n=$(".final_price"),a=$(".source_discount_value");e.text(calculate_process_price()),t.text(calculate_discount()),c.text(calculate_taxes()),n.text(calculate_process_price_taxes()),a.text(calculate_source_discount()),$('input[name="total_price"]').val(calculate_process_price()),$('input[name="total_price_taxes"]').val(calculate_process_price_taxes()),$('input[name="taxes_value"]').val(calculate_taxes()),$('input[name="source_discount_value"]').val(calculate_source_discount())},window.changeTaxesRate=function(){TaxesRate=$("#taxesRate").val()/100,update_prices()},$(document).ready(function(){if($(document).delegate(".unit_price, .quantity, .total_price","focus",function(e){var t=$(this).parent().closest("tr");t.hasClass("skip")||(add_new_process_item(),t.addClass("skip"))}),$(document).delegate("#prcoess_items .delete","click",function(e){console.log("Working");var t=$(this).parent().parent();console.log(processItemsCount),processItemsCount>1&&(t.prev()&&!t.next().is("tr")&&t.prev().removeClass("skip"),t.remove(),processItemsCount--,update_prices()),console.log(processItemsCount)}),$(document).delegate("#prcoess_items input.quantity","change",function(){var e=$(this),t=$(this).parent().parent().next().find("input"),c=t.parent().parent().next().find("input");""==e.val()&&e.val(0);var n=parseFloat(t.val())*parseFloat(e.val());n=roundDecimals(n,decimalPointCount),c.val(n),update_prices()}),$(document).delegate("#prcoess_items input.unit_price","change",function(){var e=$(this),t=$(this).parent().parent().prev().find("input"),c=e.parent().parent().next().find("input");""==e.val()&&e.val(0);var n=parseFloat(e.val())*parseFloat(t.val());n=roundDecimals(n,decimalPointCount),c.val(n),update_prices()}),$("#require_invoice, #has_discount, #has_source_discount").change(function(){update_prices()}),$("#discount_value").change(function(){$("#discount_percentage").val(calculate_percentage()),update_prices()}),$("#discount_percentage").change(function(){$("#discount_value").val(calculate_discount_from_percentage()),update_prices()}),$("#source_discount_value").change(function(){$("#source_discount_percentage").val(calculate_source_percentage()),update_prices()}),$("#source_discount_percentage").change(function(){$("#source_discount_value").val(calculate_source_discount_from_percentage()),update_prices()}),processItemsCount=$("#prcoess_items").children().length,0==processItemsCount)add_new_process_item();else for(var e=0;e<processItemsCount;e++){var t=parseFloat($('input[name="items['+e+'][quantity]"]').val()),c=parseFloat($('input[name="items['+e+'][unit_price]"]').val());$('input[name="items['+e+'][total_price]"]').val(roundDecimals(t*c,decimalPointCount))}update_prices()})}});